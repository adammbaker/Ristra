{% extends 'intake/base.html' %}

{% block title %}Asylee List View :: Ristra Refuge{% endblock %}

{% block content %}

    <div class="card">
      <table class="table mb-0">
        <thead>
          <tr>
            <th>
              <input type="text" id="search_names" list="names" placeholder="Filter by name">
                <datalist id="names">
                    {% for unit in asylee_list %}
                        <option value="{{ asylee.name }}">
                    {% endfor %}
                </datalist>
            </th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
          <tr>
            <th>Name</th>
            <th>A Number</th>
            <th>Age</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for unit in asylee_list %}
            <tr>
              <td class="align-middle">{{ unit.name }}</td>
              <td class="align-middle">{{ unit.a_number }}</td>
              <td class="align-middle">{{ unit.age }} years old</td>
              <td class="text-right">
                <a href="{% url 'asylee:detail' unit.id %}" class="card_link">See more</a>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td class="bg-light text-center font-italic" colspan="10">No medical records found matching your request</td>
            </tr>
          {% endfor %}
          <tr>
              <td colspan="10">
                  <a href="{% url 'home' %}" class="btn btn-primary">Add New Medical Issue&nbsp;
                  <span class="badge badge-light">+</span></a>
              </td>
          </tr>
        </tbody>
        {% include 'intake/pagination.html' with is_paginated=is_paginated page_obj=page_obj %}
      </table>
    </div>
    <script  type="text/javascript">
      $("#search_names").on("keyup", function() {
          var value = $(this).val().toLocaleUpperCase();;

          $("table > tbody tr").each(function(index) {

                  $row = $(this);

                  var id = $row.find("td").eq(0).text();

                  if (id.indexOf(value) < 0) {
                      $row.hide();
                  }
                  else {
                      $row.show();
                  }
          });
      });
      </script>
  {% endblock %}
